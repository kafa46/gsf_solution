{% extends "base.html" %}

{% block content %}
<div class="container mt-4">

    <div class="row mb-4">
        <!-- 카메라 목록 및 새로고침 버튼 -->
        <div class="col-md-6 mb-3">
            <div class="border rounded p-2">
                <h2 class="h5 mb-3">Available Cameras</h2>
                <!-- 카메라 선택 UI -->
                <select id="cameraSelect" class="form-select mb-3">
                    <option value="">Select a camera</option>
                </select>
                <!-- 새로고침 버튼 -->
                <button type="button" class="btn btn-outline-secondary" id="refreshBtn">Refresh Camera List</button>
                <!-- 카메라 열기 버튼 -->
                <button type="button" class="btn btn-outline-primary" id="camOpenBtn">Open Camera</button>
            </div>
            </div>
        </div>
    </div>

    <div class="row mb-4">
        <!-- 실시간 카메라와 처리된 이미지 -->
        <div class="col-md-6 mb-3">
            <div class="border rounded p-2">
                <h2 class="h5 mb-3">Realtime monitoring</h2>
                <!-- Live Camera Feed -->
                <img id="videoFeed" src="/static/imgs/ImageIcon.png" class="img-fluid" alt="Live Camera Feed">
            </div>
        </div>

        <div class="col-md-6 mb-3">
            <div class="border rounded p-2">
                <h2 class="h5 mb-3">Processed Image</h2>
                <!-- Processed Image -->
                <img id="processedImage" src="/static/imgs/ImageIcon.png" class="img-fluid" alt="Processed Image">
            </div>
        </div>
    </div>

    <div class="row">
        <!-- Table with input fields -->
        <div class="col-md-12 mb-4">
            <h2 class="h5 mb-3">Configuration</h2>
            <table class="table table-bordered">
                <thead>
                    <tr>
                        <th>#</th>
                        <th>Margin</th>
                        <th>Lower Bound</th>
                        <th>Upper Bound</th>
                        <th><button type="button" class="btn btn-outline-secondary btn-sm" id="addRowBtn">행 추가</button></th>
                    </tr>
                </thead>
                <tbody id="configTableBody">
                    <!-- table row -->
                    <tr>
                        <td>1</td>
                        <td><input type="number" class="form-control" name="margin" placeholder="Enter Margin"></td>
                        <td><input type="number" class="form-control" name="lower_bound" placeholder="Enter Lower Bound"></td>
                        <td><input type="number" class="form-control" name="upper_bound" placeholder="Enter Upper Bound"></td>
                        <td><button type="button" class="btn btn-outline-danger btn-sm remove-row">삭제</button></td>
                    </tr>
                </tbody>
            </table>
            
            <!-- 이미지 처리 버튼 -->
            <button type="button" class="btn btn-outline-success" id="detectBtn">Detect</button>
        </div>
    </div>

    <div class="row">
        <!-- 조작 버튼 -->
        <div class="col-md-12">
            <button type="button" class="btn btn-outline-primary me-3" id="saveStartBtn">Save Start</button>
            <button type="button" class="btn btn-outline-danger" id="saveStopBtn">Save Stop</button>
        </div>
    </div>
</div>
{% endblock %}